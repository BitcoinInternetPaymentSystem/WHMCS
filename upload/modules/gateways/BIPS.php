<?php
	function BIPS_config()
	{
		$configarray = array(
			"FriendlyName" => array("Type" => "System", "Value" => "BIPS"),
			"api" => array("FriendlyName" => "API Key", "Type" => "text", "Size" => "35", ),
			"secret" => array("FriendlyName" => "Merchant Secret", "Type" => "text", "Size" => "20", )
		);
		return $configarray;
	}

	function BIPS_link($params)
	{
		$ch = curl_init();
		curl_setopt_array($ch, array(
		CURLOPT_URL => 'https://BIPS.me/api/v1/invoice',
		CURLOPT_USERPWD => $params["api"],
		CURLOPT_POSTFIELDS => 'price=' . number_format($params["amount"], 2, '.', '') . '&currency=' . $params['currency'] . '&item=' . $params["description"] . '&custom=' . json_encode(array('invoiceid' => $params['invoiceid'], 'returnurl' => rawurlencode($params['systemurl']), 'cancelurl' => rawurlencode($params['systemurl']))),
		CURLOPT_RETURNTRANSFER => true,
		CURLOPT_HTTPAUTH => CURLAUTH_BASIC));
		$url = curl_exec($ch);
		curl_close($ch);

		$link = '<a href="' . $url . '" title="BIPS Invoice"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJoAAAAuCAYAAADQpAB0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozMTE5RjdGQjMyODJFMjExQUIxMzg5RTZEQThENThGNiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3RTE0QkZBNDE5RDgxMUUzOUJGNDhGOEUyNDg4MThBQyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3RTE0QkZBMzE5RDgxMUUzOUJGNDhGOEUyNDg4MThBQyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEyQThBMUI5OEVBMkUyMTE5QTM0RUE1OEI2MjM2NjA0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjMxMTlGN0ZCMzI4MkUyMTFBQjEzODlFNkRBOEQ1OEY2Ii8+IDwvcmRmOkRlc2NyaXB0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" alt="Pay with Bitcoin" /></a>';


		return $link;
	}
?>
